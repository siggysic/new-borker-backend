{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16527,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_TOO_LONG_KEY","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"Field length of `customer_id` in `members_stripe_customers` is too long!","context":"\"This usually happens if your database encoding is utf8mb4.\\nAll unique fields and indexes must be lower than 191 characters.\\nPlease correct your field length and reset your database with knex-migrator reset.\\n\"","help":"\"Read more here: https://github.com/TryGhost/knex-migrator/issues/51\\n\"","stack":"MigrationScriptError: Field length of `customer_id` in `members_stripe_customers` is too long!\n    at MigrationScriptError.KnexMigrateError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/index.js:1045:23\n\nError: ER_TOO_LONG_KEY: Specified key was too long; max key length is 767 bytes\n    at Query.Sequence._packetToError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:198:25)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:134:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:128:12)\n    at Client_MySQL.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/client.js:168:17)\n    at Runner.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:277:18"},"msg":"Field length of `customer_id` in `members_stripe_customers` is too long!","time":"2021-05-24T13:57:18.199Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16601,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_CANNOT_ADD_FOREIGN","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANNOT_ADD_FOREIGN: Cannot add foreign key constraint","context":"{\"name\":\"1-create-tables.js\"}","help":"\"Error occurred while executing the following migration: 1-create-tables.js\"","stack":"MigrationScriptError: alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANNOT_ADD_FOREIGN: Cannot add foreign key constraint\n    at MigrationScriptError.KnexMigrateError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/index.js:1055:19\n\nError: ER_CANNOT_ADD_FOREIGN: Cannot add foreign key constraint\n    at Query.Sequence._packetToError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:198:25)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:134:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:128:12)\n    at Client_MySQL.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/client.js:168:17)\n    at Runner.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:277:18"},"msg":"alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANNOT_ADD_FOREIGN: Cannot add foreign key constraint","time":"2021-05-24T13:58:25.919Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16634,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_TOO_LONG_KEY","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"Field length of `stripe_product_id` in `stripe_products` is too long!","context":"\"This usually happens if your database encoding is utf8mb4.\\nAll unique fields and indexes must be lower than 191 characters.\\nPlease correct your field length and reset your database with knex-migrator reset.\\n\"","help":"\"Read more here: https://github.com/TryGhost/knex-migrator/issues/51\\n\"","stack":"MigrationScriptError: Field length of `stripe_product_id` in `stripe_products` is too long!\n    at MigrationScriptError.KnexMigrateError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/index.js:1045:23\n\nError: ER_TOO_LONG_KEY: Specified key was too long; max key length is 767 bytes\n    at Query.Sequence._packetToError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:198:25)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:134:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:128:12)\n    at Client_MySQL.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/client.js:168:17)\n    at Runner.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:277:18"},"msg":"Field length of `stripe_product_id` in `stripe_products` is too long!","time":"2021-05-24T13:58:45.916Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16722,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_TOO_LONG_KEY","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"Field length of `stripe_price_id` in `stripe_prices` is too long!","context":"\"This usually happens if your database encoding is utf8mb4.\\nAll unique fields and indexes must be lower than 191 characters.\\nPlease correct your field length and reset your database with knex-migrator reset.\\n\"","help":"\"Read more here: https://github.com/TryGhost/knex-migrator/issues/51\\n\"","stack":"MigrationScriptError: Field length of `stripe_price_id` in `stripe_prices` is too long!\n    at MigrationScriptError.KnexMigrateError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/index.js:1045:23\n\nError: ER_TOO_LONG_KEY: Specified key was too long; max key length is 767 bytes\n    at Query.Sequence._packetToError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:198:25)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:134:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:128:12)\n    at Client_MySQL.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/client.js:168:17)\n    at Runner.query (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/runner.js:277:18"},"msg":"Field length of `stripe_price_id` in `stripe_prices` is too long!","time":"2021-05-24T14:00:56.807Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16784,"level":50,"req":{"meta":{"requestId":"98bd3891-9f94-40c7-bcf4-022fe252d2af","userId":null},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/canary/admin/users/me/?include=roles","params":{},"headers":{"host":"localhost:2368","connection":"keep-alive","sec-ch-ua":"\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"90\", \"Google Chrome\";v=\"90\"","sec-ch-ua-mobile":"?0","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"4.4","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:2368/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9","cookie":"**REDACTED**"},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"321","etag":"W/\"141-SMiKd0JSHpXG/9QlUFVzS9j+PHk\"","vary":"Accept-Encoding"},"statusCode":403,"responseTime":"15ms"},"err":{"id":"6324be70-bc9a-11eb-b800-690c205c025d","domain":"http://localhost:2368/","code":null,"name":"NoPermissionError","statusCode":403,"level":"normal","message":"Authorization failed","context":"\"Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.\"","stack":"NoPermissionError: Authorization failed\n    at new NoPermissionError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/ghost-ignition/lib/errors/index.js:134:23)\n    at authorizeAdminApi (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/services/auth/authorize.js:27:25)\n    at Layer.handle [as handle_request] (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/express/lib/router/route.js:137:13)\n    at authenticate (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/services/auth/session/middleware.js:28:13)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)"},"msg":"Authorization failed","time":"2021-05-24T14:14:43.933Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":16784,"level":50,"req":{"meta":{"requestId":"5c1b78b8-20cc-4656-8adf-b5877e2843fd","userId":null},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/canary/admin/users/me/?include=roles","params":{},"headers":{"host":"localhost:2368","connection":"keep-alive","sec-ch-ua":"\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"90\", \"Google Chrome\";v=\"90\"","sec-ch-ua-mobile":"?0","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"4.4","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:2368/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9","cookie":"**REDACTED**"},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"321","etag":"W/\"141-L3bABW5GLM3H/3w3riuxFLe+XFY\"","vary":"Accept-Encoding"},"statusCode":403,"responseTime":"3ms"},"err":{"id":"633a9060-bc9a-11eb-b800-690c205c025d","domain":"http://localhost:2368/","code":null,"name":"NoPermissionError","statusCode":403,"level":"normal","message":"Authorization failed","context":"\"Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.\"","stack":"NoPermissionError: Authorization failed\n    at new NoPermissionError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/ghost-ignition/lib/errors/index.js:134:23)\n    at authorizeAdminApi (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/services/auth/authorize.js:27:25)\n    at Layer.handle [as handle_request] (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/express/lib/router/route.js:137:13)\n    at authenticate (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/services/auth/session/middleware.js:28:13)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)"},"msg":"Authorization failed","time":"2021-05-24T14:14:44.072Z","v":0}
{"name":"Log","hostname":"ip-192-168-2-34.ap-southeast-1.compute.internal","pid":34105,"level":50,"err":{"id":500,"domain":"http://localhost:2368/","code":"ECONNREFUSED","name":"DatabaseError","statusCode":500,"level":"normal","message":"connect ECONNREFUSED 127.0.0.1:3307","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 127.0.0.1:3307\n    at DatabaseError.KnexMigrateError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex-migrator/lib/database.js:48:19\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async DatabaseStateManager.getState (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/data/db/state-manager.js:39:13)\n    at async DatabaseStateManager.makeReady (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/server/data/db/state-manager.js:72:25)\n    at async initDatabase (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/boot.js:49:5)\n    at async bootGhost (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/core/boot.js:278:9)\n\nError: connect ECONNREFUSED 127.0.0.1:3307\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1144:16)\n    --------------------\n    at Protocol._enqueue (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:68:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/dialects/mysql/index.js:63:12)\n    at create (/Users/nattapolsrikitpipat/Workspaces/new-borker-backend/versions/4.4.0/node_modules/knex/lib/client.js:290:39)"},"msg":"connect ECONNREFUSED 127.0.0.1:3307","time":"2021-05-26T05:00:17.558Z","v":0}
